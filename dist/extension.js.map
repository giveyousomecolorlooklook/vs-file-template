{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://vs-file-template/./src/utils/UIUtils.ts","webpack://vs-file-template/./src/extension.ts","webpack://vs-file-template/./src/providers/CodeLensProvider.ts","webpack://vs-file-template/external commonjs \"vscode\"","webpack://vs-file-template/./src/commands/CommandHandler.ts","webpack://vs-file-template/./src/utils/FileSystemUtils.ts","webpack://vs-file-template/./src/services/TemplateService.ts","webpack://vs-file-template/./src/config/Configuration.ts","webpack://vs-file-template/external node-commonjs \"fs\"","webpack://vs-file-template/external node-commonjs \"path\"","webpack://vs-file-template/./src/ui/StatusBarManager.ts","webpack://vs-file-template/webpack/bootstrap","webpack://vs-file-template/webpack/startup"],"sourcesContent":["import * as vscode from 'vscode';\r\nimport { Configuration } from '../config/Configuration';\r\n\r\n/**\r\n * UIå·¥å…·ç±» - å¤„ç†ç”¨æˆ·ç•Œé¢äº¤äº’\r\n */\r\nexport class UIUtils {\r\n    /**\r\n     * æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯\r\n     */\r\n    public static showError(message: string): void {\r\n        vscode.window.showErrorMessage(`æ–‡ä»¶æ¨¡æ¿: ${message}`);\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºä¿¡æ¯æ¶ˆæ¯\r\n     */\r\n    public static showInfo(message: string): void {\r\n        vscode.window.showInformationMessage(`æ–‡ä»¶æ¨¡æ¿: ${message}`);\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºè­¦å‘Šæ¶ˆæ¯\r\n     */\r\n    public static showWarning(message: string): void {\r\n        vscode.window.showWarningMessage(`æ–‡ä»¶æ¨¡æ¿: ${message}`);\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºé€‰æ‹©åˆ—è¡¨\r\n     */\r\n    public static async showQuickPick(items: string[], placeholder?: string): Promise<string | undefined> {\r\n        if (items.length === 0) {\r\n            this.showWarning('æ²¡æœ‰å¯é€‰é¡¹');\r\n            return undefined;\r\n        }\r\n\r\n        return await vscode.window.showQuickPick(items, {\r\n            placeHolder: placeholder || 'è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºå¸¦æœ‰é»˜è®¤ç­›é€‰å€¼çš„é€‰æ‹©åˆ—è¡¨\r\n     * ä½¿ç”¨createQuickPick APIæ¥å®ç°é»˜è®¤è¾“å…¥å€¼\r\n     */\r\n    public static async showQuickPickWithFilter(items: string[], defaultFilter?: string, placeholder?: string): Promise<string | undefined> {\r\n        if (items.length === 0) {\r\n            this.showWarning('æ²¡æœ‰å¯é€‰é¡¹');\r\n            return undefined;\r\n        }\r\n\r\n        return new Promise<string | undefined>((resolve) => {\r\n            const quickPick = vscode.window.createQuickPick();\r\n            \r\n            // è½¬æ¢ä¸ºQuickPickItemæ ¼å¼\r\n            const quickPickItems: vscode.QuickPickItem[] = items.map(item => ({\r\n                label: item,\r\n                description: ''\r\n            }));\r\n            \r\n            quickPick.items = quickPickItems;\r\n            quickPick.placeholder = placeholder || 'è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹';\r\n            \r\n            // è®¾ç½®é»˜è®¤ç­›é€‰å€¼\r\n            if (defaultFilter) {\r\n                quickPick.value = defaultFilter;\r\n            }\r\n            \r\n            quickPick.onDidChangeSelection(selection => {\r\n                if (selection[0]) {\r\n                    resolve(selection[0].label);\r\n                    quickPick.hide();\r\n                }\r\n            });\r\n            \r\n            quickPick.onDidHide(() => {\r\n                resolve(undefined);\r\n                quickPick.dispose();\r\n            });\r\n            \r\n            quickPick.show();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºè¾“å…¥æ¡†\r\n     */\r\n    public static async showInputBox(placeholder?: string, prompt?: string): Promise<string | undefined> {\r\n        return await vscode.window.showInputBox({\r\n            placeHolder: placeholder,\r\n            prompt: prompt\r\n        });\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºæ–‡ä»¶å¤¹é€‰æ‹©å¯¹è¯æ¡†\r\n     */\r\n    public static async showOpenDialog(title?: string): Promise<vscode.Uri | undefined> {\r\n        const result = await vscode.window.showOpenDialog({\r\n            canSelectFiles: false,\r\n            canSelectFolders: true,\r\n            canSelectMany: false,\r\n            title: title || 'é€‰æ‹©æ–‡ä»¶å¤¹'\r\n        });\r\n\r\n        return result?.[0];\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†\r\n     */\r\n    public static async showConfirmDialog(message: string): Promise<boolean> {\r\n        const result = await vscode.window.showInformationMessage(\r\n            message,\r\n            { modal: true },\r\n            'ç¡®å®š',\r\n            'å–æ¶ˆ'\r\n        );\r\n        \r\n        return result === 'ç¡®å®š';\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºæ“ä½œé€‰æ‹©èœå•\r\n     */\r\n    public static async showActionMenu(): Promise<string | undefined> {\r\n        const codeLensEnabled = Configuration.getCodeLensEnabled();\r\n        const codeLensStatus = codeLensEnabled ? 'ç¦ç”¨ä»£ç é•œå¤´' : 'å¯ç”¨ä»£ç é•œå¤´';\r\n        \r\n        const actions = [\r\n            'é…ç½®æ¨¡æ¿è·¯å¾„',\r\n            'ç®¡ç†æ¨¡æ¿',\r\n            codeLensStatus\r\n        ];\r\n\r\n        return await this.showQuickPick(actions, 'é€‰æ‹©æ“ä½œ');\r\n    }\r\n}\r\n","import * as vscode from 'vscode';\nimport { CommandHandler } from './commands/CommandHandler';\nimport { StatusBarManager } from './ui/StatusBarManager';\nimport { Configuration } from './config/Configuration';\nimport { UIUtils } from './utils/UIUtils';\nimport { TemplateCodeLensProvider } from './providers/CodeLensProvider';\n\nlet statusBarManager: StatusBarManager;\nlet codeLensProvider: TemplateCodeLensProvider;\n\n/**\n * æ‰©å±•æ¿€æ´»æ—¶è°ƒç”¨\n */\nexport function activate(context: vscode.ExtensionContext) {\n    console.log('æ–‡ä»¶æ¨¡æ¿æ’ä»¶å·²æ¿€æ´»');\n\n    // æ³¨å†Œæ‰€æœ‰å‘½ä»¤\n    CommandHandler.registerCommands(context);\n\n    // åˆ›å»ºå¹¶æ³¨å†ŒCodeLensæä¾›å™¨\n    codeLensProvider = new TemplateCodeLensProvider();\n    const codeLensDisposable = vscode.languages.registerCodeLensProvider(\n        { scheme: 'file' }, // æ”¯æŒæ‰€æœ‰æ–‡ä»¶ç±»å‹\n        codeLensProvider\n    );\n    context.subscriptions.push(codeLensDisposable);\n\n    // ç›‘å¬æ–‡æœ¬é€‰æ‹©å˜åŒ–ä»¥åˆ·æ–°CodeLens\n    const selectionChangeListener = vscode.window.onDidChangeTextEditorSelection(() => {\n        codeLensProvider.refresh();\n    });\n    context.subscriptions.push(selectionChangeListener);\n\n    // ç›‘å¬æ´»åŠ¨ç¼–è¾‘å™¨å˜åŒ–ä»¥åˆ·æ–°CodeLens\n    const activeEditorChangeListener = vscode.window.onDidChangeActiveTextEditor(() => {\n        codeLensProvider.refresh();\n    });\n    context.subscriptions.push(activeEditorChangeListener);\n\n    // ç›‘å¬å…‰æ ‡ä½ç½®å˜åŒ–ä»¥åˆ·æ–°CodeLens\n    const cursorChangeListener = vscode.window.onDidChangeTextEditorSelection(() => {\n        codeLensProvider.refresh();\n    });\n    context.subscriptions.push(cursorChangeListener);\n\n    // åˆ›å»ºçŠ¶æ€æ ç®¡ç†å™¨\n    statusBarManager = new StatusBarManager();\n    context.subscriptions.push({\n        dispose: () => statusBarManager.dispose()\n    });\n\n    // æ³¨å†Œé…ç½®å˜åŒ–ç›‘å¬å™¨\n    const configChangeListener = vscode.workspace.onDidChangeConfiguration(event => {\n        if (event.affectsConfiguration('vs-file-template.templatePath')) {\n            handleTemplatePathChanged();\n        }\n        if (event.affectsConfiguration('vs-file-template.enableCodeLens')) {\n            handleCodeLensConfigChanged();\n        }\n    });\n    context.subscriptions.push(configChangeListener);\n\n    // æ£€æŸ¥æ¨¡æ¿è·¯å¾„é…ç½®\n    checkTemplateConfiguration();\n\n    UIUtils.showInfo('æ–‡ä»¶æ¨¡æ¿æ’ä»¶å·²å¯åŠ¨');\n}\n\n/**\n * æ‰©å±•åœç”¨æ—¶è°ƒç”¨\n */\nexport function deactivate() {\n    if (statusBarManager) {\n        statusBarManager.dispose();\n    }\n    if (codeLensProvider) {\n        // CodeLensæä¾›å™¨ä¼šé€šè¿‡context.subscriptionsè‡ªåŠ¨æ¸…ç†\n    }\n    console.log('æ–‡ä»¶æ¨¡æ¿æ’ä»¶å·²åœç”¨');\n}\n\n/**\n * æ£€æŸ¥æ¨¡æ¿é…ç½®\n */\nfunction checkTemplateConfiguration(): void {\n    const templatePath = Configuration.getTemplatePath();\n    \n    if (!templatePath) {\n        UIUtils.showWarning('å°šæœªé…ç½®æ¨¡æ¿è·¯å¾„ï¼Œè¯·å…ˆé…ç½®æ¨¡æ¿è·¯å¾„');\n        return;\n    }\n\n    if (!Configuration.validateTemplatePath(templatePath)) {\n        UIUtils.showWarning('é…ç½®çš„æ¨¡æ¿è·¯å¾„æ— æ•ˆï¼Œè¯·æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨');\n        return;\n    }\n\n    // ç¡®ä¿å¿…éœ€çš„å­ç›®å½•å­˜åœ¨\n    Configuration.ensureTemplateSubDirectories();\n\n    console.log(`æ¨¡æ¿è·¯å¾„å·²é…ç½®: ${templatePath}`);\n}\n\n/**\n * å¤„ç†æ¨¡æ¿è·¯å¾„é…ç½®å˜åŒ–\n */\nfunction handleTemplatePathChanged(): void {\n    console.log('æ¨¡æ¿è·¯å¾„é…ç½®å·²å˜åŒ–ï¼Œæ£€æŸ¥ç›®å½•ç»“æ„...');\n    \n    const templatePath = Configuration.getTemplatePath();\n    \n    if (!templatePath) {\n        UIUtils.showWarning('æ¨¡æ¿è·¯å¾„å·²æ¸…ç©º');\n        return;\n    }\n\n    if (!Configuration.validateTemplatePath(templatePath)) {\n        UIUtils.showWarning('æ–°é…ç½®çš„æ¨¡æ¿è·¯å¾„æ— æ•ˆï¼Œè¯·æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨');\n        return;\n    }\n\n    // æ£€æŸ¥å¹¶åˆ›å»ºå¿…éœ€çš„å­ç›®å½•\n    const success = Configuration.ensureTemplateSubDirectories();\n    if (success) {\n        console.log(`æ¨¡æ¿è·¯å¾„å·²æ›´æ–°: ${templatePath}`);\n    }\n}\n\n/**\n * å¤„ç†CodeLensé…ç½®å˜åŒ–\n */\nfunction handleCodeLensConfigChanged(): void {\n    console.log('CodeLensé…ç½®å·²å˜åŒ–ï¼Œåˆ·æ–°CodeLens...');\n    if (codeLensProvider) {\n        codeLensProvider.refresh();\n    }\n}\n","import * as vscode from 'vscode';\r\nimport { Configuration } from '../config/Configuration';\r\n\r\n/**\r\n * CodeLensæä¾›å™¨ - åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºæ¨¡æ¿ç›¸å…³çš„å¿«æ·æ“ä½œ\r\n */\r\nexport class TemplateCodeLensProvider implements vscode.CodeLensProvider {\r\n    private _onDidChangeCodeLenses: vscode.EventEmitter<void> = new vscode.EventEmitter<void>();\r\n    public readonly onDidChangeCodeLenses: vscode.Event<void> = this._onDidChangeCodeLenses.event;\r\n\r\n    constructor() {}\r\n\r\n    public provideCodeLenses(\r\n        document: vscode.TextDocument,\r\n        token: vscode.CancellationToken\r\n    ): vscode.CodeLens[] | Thenable<vscode.CodeLens[]> {\r\n        const codeLenses: vscode.CodeLens[] = [];\r\n\r\n        // æ£€æŸ¥CodeLensæ˜¯å¦å¯ç”¨\r\n        if (!Configuration.getCodeLensEnabled()) {\r\n            return codeLenses;\r\n        }\r\n\r\n        // åªåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­æ˜¾ç¤ºCodeLens\r\n        if (document.uri.scheme !== 'file') {\r\n            return codeLenses;\r\n        }\r\n\r\n        // è·å–å½“å‰ç¼–è¾‘å™¨\r\n        const editor = vscode.window.activeTextEditor;\r\n        if (!editor || editor.document !== document) {\r\n            return codeLenses;\r\n        }\r\n\r\n        // åœ¨å…‰æ ‡æ‰€åœ¨è¡Œæ˜¾ç¤ºCodeLens\r\n        const cursorLine = editor.selection.active.line;\r\n        const cursorPosition = new vscode.Range(cursorLine, 0, cursorLine, 0);\r\n        \r\n        // \"ä»æ¨¡æ¿æ’å…¥\" CodeLens - å§‹ç»ˆæ˜¾ç¤º\r\n        const insertCodeLens = new vscode.CodeLens(cursorPosition, {\r\n            title: \"ğŸ”§ ä»æ¨¡æ¿æ’å…¥\",\r\n            command: \"vs-file-template.insert\",\r\n            tooltip: \"åœ¨å½“å‰ä½ç½®æ’å…¥æ¨¡æ¿å†…å®¹\"\r\n        });\r\n        codeLenses.push(insertCodeLens);\r\n        \r\n        // \"ä¿å­˜ä¸ºæ¨¡æ¿\" CodeLens - åªåœ¨æœ‰é€‰ä¸­å†…å®¹æ—¶æ˜¾ç¤º\r\n        if (!editor.selection.isEmpty) {\r\n            const addToTemplateCodeLens = new vscode.CodeLens(cursorPosition, {\r\n                title: \"ğŸ’¾ ä¿å­˜é€‰ä¸­å†…å®¹ä¸ºæ¨¡æ¿\",\r\n                command: \"vs-file-template.addToInsertDir\",\r\n                tooltip: \"å°†é€‰ä¸­çš„å†…å®¹ä¿å­˜ä¸ºæ¨¡æ¿\"\r\n            });\r\n            codeLenses.push(addToTemplateCodeLens);\r\n        }\r\n\r\n        return codeLenses;\r\n    }\r\n\r\n    public resolveCodeLens?(\r\n        codeLens: vscode.CodeLens,\r\n        token: vscode.CancellationToken\r\n    ): vscode.CodeLens | Thenable<vscode.CodeLens> {\r\n        return codeLens;\r\n    }\r\n\r\n    /**\r\n     * åˆ·æ–°CodeLens\r\n     */\r\n    public refresh(): void {\r\n        this._onDidChangeCodeLenses.fire();\r\n    }\r\n}\r\n","module.exports = require(\"vscode\");","import * as vscode from 'vscode';\r\nimport { TemplateService } from '../services/TemplateService';\r\nimport { Configuration } from '../config/Configuration';\r\nimport { UIUtils } from '../utils/UIUtils';\r\n\r\n/**\r\n * å‘½ä»¤å¤„ç†å™¨ç±» - å¤„ç†å„ç§å‘½ä»¤çš„æ‰§è¡Œ\r\n */\r\nexport class CommandHandler {\r\n    /**\r\n     * æ³¨å†Œæ‰€æœ‰å‘½ä»¤\r\n     */\r\n    public static registerCommands(context: vscode.ExtensionContext): void {\r\n        // æ³¨å†Œæ’å…¥æ¨¡æ¿å‘½ä»¤\r\n        const insertCommand = vscode.commands.registerCommand(\r\n            'vs-file-template.insert',\r\n            () => this.handleInsertCommand()\r\n        );\r\n\r\n        // æ³¨å†Œå¯¼å…¥æ¨¡æ¿å‘½ä»¤\r\n        const importCommand = vscode.commands.registerCommand(\r\n            'vs-file-template.import',\r\n            (uri: vscode.Uri) => this.handleImportCommand(uri)\r\n        );\r\n\r\n        // æ³¨å†Œæ–°å»ºæ–‡ä»¶å‘½ä»¤\r\n        const newCommand = vscode.commands.registerCommand(\r\n            'vs-file-template.new',\r\n            (uri: vscode.Uri) => this.handleNewCommand(uri)\r\n        );\r\n\r\n        // æ³¨å†ŒçŠ¶æ€æ æŒ‰é’®å‘½ä»¤\r\n        const btnCommand = vscode.commands.registerCommand(\r\n            'vs-file-template.btn',\r\n            () => this.handleBtnCommand()\r\n        );\r\n\r\n        // æ³¨å†Œæ·»åŠ åˆ°insertç›®å½•å‘½ä»¤\r\n        const addToInsertCommand = vscode.commands.registerCommand(\r\n            'vs-file-template.addToInsertDir',\r\n            () => this.handleAddToInsertDirCommand()\r\n        );\r\n\r\n        // æ³¨å†Œåˆ‡æ¢CodeLenså‘½ä»¤\r\n        const toggleCodeLensCommand = vscode.commands.registerCommand(\r\n            'vs-file-template.toggleCodeLens',\r\n            () => this.handleToggleCodeLensCommand()\r\n        );\r\n\r\n        // æ·»åŠ åˆ°è®¢é˜…åˆ—è¡¨\r\n        context.subscriptions.push(insertCommand, importCommand, newCommand, btnCommand, addToInsertCommand, toggleCodeLensCommand);\r\n    }\r\n\r\n    /**\r\n     * å¤„ç†æ’å…¥æ¨¡æ¿å‘½ä»¤\r\n     */\r\n    private static async handleInsertCommand(): Promise<void> {\r\n        try {\r\n            await TemplateService.insertTemplate();\r\n        } catch (error) {\r\n            UIUtils.showError(`æ’å…¥æ¨¡æ¿å¤±è´¥: ${error}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¤„ç†å¯¼å…¥æ¨¡æ¿å‘½ä»¤\r\n     */\r\n    private static async handleImportCommand(uri: vscode.Uri): Promise<void> {\r\n        try {\r\n            await TemplateService.importTemplate(uri);\r\n        } catch (error) {\r\n            UIUtils.showError(`å¯¼å…¥æ¨¡æ¿å¤±è´¥: ${error}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¤„ç†æ–°å»ºæ–‡ä»¶å‘½ä»¤\r\n     */\r\n    private static async handleNewCommand(uri: vscode.Uri): Promise<void> {\r\n        try {\r\n            await TemplateService.createNewFile(uri);\r\n        } catch (error) {\r\n            UIUtils.showError(`åˆ›å»ºæ–°æ–‡ä»¶å¤±è´¥: ${error}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¤„ç†çŠ¶æ€æ æŒ‰é’®å‘½ä»¤\r\n     */\r\n    private static async handleBtnCommand(): Promise<void> {\r\n        try {\r\n            const action = await UIUtils.showActionMenu();\r\n            if (!action) {\r\n                return;\r\n            }\r\n\r\n            switch (action) {\r\n                case 'é…ç½®æ¨¡æ¿è·¯å¾„':\r\n                    await Configuration.openSettings();\r\n                    break;\r\n                case 'ç®¡ç†æ¨¡æ¿':\r\n                    await TemplateService.manageTemplates();\r\n                    break;\r\n                case 'å¯ç”¨ä»£ç é•œå¤´':\r\n                case 'ç¦ç”¨ä»£ç é•œå¤´':\r\n                    await this.handleToggleCodeLensCommand();\r\n                    break;\r\n            }\r\n        } catch (error) {\r\n            UIUtils.showError(`æ‰§è¡Œæ“ä½œå¤±è´¥: ${error}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¤„ç†æ·»åŠ åˆ°insertç›®å½•å‘½ä»¤\r\n     */\r\n    private static async handleAddToInsertDirCommand(): Promise<void> {\r\n        try {\r\n            await TemplateService.addToInsertDir();\r\n        } catch (error) {\r\n            UIUtils.showError(`æ·»åŠ æ¨¡æ¿å¤±è´¥: ${error}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¤„ç†åˆ‡æ¢CodeLenså‘½ä»¤\r\n     */\r\n    private static async handleToggleCodeLensCommand(): Promise<void> {\r\n        try {\r\n            const newState = await Configuration.toggleCodeLens();\r\n            UIUtils.showInfo(`ä»£ç é•œå¤´å·²${newState ? 'å¯ç”¨' : 'ç¦ç”¨'}`);\r\n            \r\n            // è§¦å‘CodeLensåˆ·æ–°\r\n            vscode.commands.executeCommand('vscode.executeCodeLensProvider');\r\n        } catch (error) {\r\n            UIUtils.showError(`åˆ‡æ¢ä»£ç é•œå¤´çŠ¶æ€å¤±è´¥: ${error}`);\r\n        }\r\n    }\r\n}\r\n","import * as vscode from 'vscode';\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\n\r\n/**\r\n * æ–‡ä»¶ç³»ç»Ÿå·¥å…·ç±» - å¤„ç†æ–‡ä»¶å’Œç›®å½•æ“ä½œ\r\n */\r\nexport class FileSystemUtils {\r\n    /**\r\n     * æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨\r\n     */\r\n    public static directoryExists(dirPath: string): boolean {\r\n        try {\r\n            const stat = fs.statSync(dirPath);\r\n            return stat.isDirectory();\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨\r\n     */\r\n    public static fileExists(filePath: string): boolean {\r\n        try {\r\n            const stat = fs.statSync(filePath);\r\n            return stat.isFile();\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * åˆ›å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰\r\n     */\r\n    public static createDirectory(dirPath: string): boolean {\r\n        try {\r\n            if (!this.directoryExists(dirPath)) {\r\n                fs.mkdirSync(dirPath, { recursive: true });\r\n            }\r\n            return true;\r\n        } catch (error) {\r\n            console.error(`åˆ›å»ºç›®å½•å¤±è´¥: ${dirPath}`, error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * è¯»å–ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•\r\n     */\r\n    public static getSubDirectories(dirPath: string): string[] {\r\n        if (!this.directoryExists(dirPath)) {\r\n            return [];\r\n        }\r\n\r\n        try {\r\n            return fs.readdirSync(dirPath)\r\n                .filter(item => {\r\n                    const fullPath = path.join(dirPath, item);\r\n                    return this.directoryExists(fullPath);\r\n                });\r\n        } catch {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * è¯»å–ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶\r\n     */\r\n    public static getFiles(dirPath: string): string[] {\r\n        if (!this.directoryExists(dirPath)) {\r\n            return [];\r\n        }\r\n\r\n        try {\r\n            return fs.readdirSync(dirPath)\r\n                .filter(item => {\r\n                    const fullPath = path.join(dirPath, item);\r\n                    return this.fileExists(fullPath);\r\n                });\r\n        } catch {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * é€’å½’è·å–ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶\r\n     */\r\n    public static getFilesRecursively(dirPath: string): string[] {\r\n        if (!this.directoryExists(dirPath)) {\r\n            return [];\r\n        }\r\n\r\n        const files: string[] = [];\r\n        \r\n        try {\r\n            const items = fs.readdirSync(dirPath);\r\n            \r\n            for (const item of items) {\r\n                const fullPath = path.join(dirPath, item);\r\n                const stat = fs.statSync(fullPath);\r\n                \r\n                if (stat.isFile()) {\r\n                    files.push(fullPath);\r\n                } else if (stat.isDirectory()) {\r\n                    files.push(...this.getFilesRecursively(fullPath));\r\n                }\r\n            }\r\n        } catch {\r\n            // å¿½ç•¥é”™è¯¯\r\n        }\r\n\r\n        return files;\r\n    }\r\n\r\n    /**\r\n     * è¯»å–æ–‡ä»¶å†…å®¹\r\n     */\r\n    public static readFileContent(filePath: string): string | null {\r\n        try {\r\n            return fs.readFileSync(filePath, 'utf8');\r\n        } catch {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å†™å…¥æ–‡ä»¶å†…å®¹\r\n     */\r\n    public static writeFileContent(filePath: string, content: string): boolean {\r\n        try {\r\n            // ç¡®ä¿ç›®å½•å­˜åœ¨\r\n            const dir = path.dirname(filePath);\r\n            if (!this.directoryExists(dir)) {\r\n                fs.mkdirSync(dir, { recursive: true });\r\n            }\r\n            \r\n            fs.writeFileSync(filePath, content, 'utf8');\r\n            return true;\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * å¤åˆ¶æ–‡ä»¶\r\n     */\r\n    public static copyFile(sourcePath: string, targetPath: string): boolean {\r\n        try {\r\n            // ç¡®ä¿ç›®æ ‡ç›®å½•å­˜åœ¨\r\n            const targetDir = path.dirname(targetPath);\r\n            if (!this.directoryExists(targetDir)) {\r\n                fs.mkdirSync(targetDir, { recursive: true });\r\n            }\r\n            \r\n            fs.copyFileSync(sourcePath, targetPath);\r\n            return true;\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * é€’å½’å¤åˆ¶ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆä¸åŒ…å«ç›®å½•ç»“æ„ï¼‰\r\n     */\r\n    public static copyFilesRecursively(sourceDir: string, targetDir: string): boolean {\r\n        try {\r\n            const files = this.getFilesRecursively(sourceDir);\r\n            \r\n            for (const file of files) {\r\n                const fileName = path.basename(file);\r\n                const targetPath = path.join(targetDir, fileName);\r\n                \r\n                if (!this.copyFile(file, targetPath)) {\r\n                    return false;\r\n                }\r\n            }\r\n            \r\n            return true;\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * é€’å½’å¤åˆ¶ç›®å½•å¹¶ä¿ç•™å†…éƒ¨ç›®å½•ç»“æ„ï¼ˆä¸åŒ…å«æ ¹ç›®å½•æœ¬èº«ï¼‰\r\n     * @param sourceDir æºç›®å½•è·¯å¾„\r\n     * @param targetDir ç›®æ ‡ç›®å½•è·¯å¾„\r\n     * @returns æ˜¯å¦å¤åˆ¶æˆåŠŸ\r\n     */\r\n    public static copyDirectoryWithStructure(sourceDir: string, targetDir: string): boolean {\r\n        try {\r\n            if (!this.directoryExists(sourceDir)) {\r\n                return false;\r\n            }\r\n\r\n            const items = fs.readdirSync(sourceDir);\r\n            \r\n            for (const item of items) {\r\n                const sourcePath = path.join(sourceDir, item);\r\n                const targetPath = path.join(targetDir, item);\r\n                const stat = fs.statSync(sourcePath);\r\n                \r\n                if (stat.isFile()) {\r\n                    // å¤åˆ¶æ–‡ä»¶\r\n                    if (!this.copyFile(sourcePath, targetPath)) {\r\n                        return false;\r\n                    }\r\n                } else if (stat.isDirectory()) {\r\n                    // é€’å½’å¤åˆ¶å­ç›®å½•\r\n                    if (!this.directoryExists(targetPath)) {\r\n                        fs.mkdirSync(targetPath, { recursive: true });\r\n                    }\r\n                    if (!this.copyDirectoryWithStructure(sourcePath, targetPath)) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n            \r\n            return true;\r\n        } catch (error) {\r\n            console.error('å¤åˆ¶ç›®å½•å¤±è´¥:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * è·å–æ–‡ä»¶æˆ–ç›®å½•çš„çˆ¶ç›®å½•\r\n     */\r\n    public static getParentDirectory(filePath: string): string {\r\n        return path.dirname(filePath);\r\n    }\r\n\r\n    /**\r\n     * ä»URIè·å–æ–‡ä»¶ç³»ç»Ÿè·¯å¾„\r\n     */\r\n    public static getPathFromUri(uri: vscode.Uri): string {\r\n        return uri.fsPath;\r\n    }\r\n}\r\n","import * as vscode from 'vscode';\r\nimport * as path from 'path';\r\nimport { Configuration } from '../config/Configuration';\r\nimport { FileSystemUtils } from '../utils/FileSystemUtils';\r\nimport { UIUtils } from '../utils/UIUtils';\r\n\r\n/**\r\n * æ¨¡æ¿æœåŠ¡ç±» - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘\r\n */\r\nexport class TemplateService {\r\n    /**\r\n     * æ’å…¥æ¨¡æ¿å†…å®¹åˆ°å½“å‰ç¼–è¾‘å™¨\r\n     */\r\n    public static async insertTemplate(): Promise<void> {\r\n        const templateDirs = Configuration.getTemplateSubDirectories();\r\n        if (!templateDirs) {\r\n            UIUtils.showError('æœªé…ç½®æ¨¡æ¿è·¯å¾„æˆ–è·¯å¾„æ— æ•ˆ');\r\n            return;\r\n        }\r\n\r\n        const insertDir = templateDirs.insert;\r\n        if (!FileSystemUtils.directoryExists(insertDir)) {\r\n            UIUtils.showError('insertç›®å½•ä¸å­˜åœ¨');\r\n            return;\r\n        }\r\n\r\n        // è·å–å½“å‰æ´»åŠ¨ç¼–è¾‘å™¨\r\n        const editor = vscode.window.activeTextEditor;\r\n        if (!editor) {\r\n            UIUtils.showError('æ²¡æœ‰æ‰“å¼€çš„ç¼–è¾‘å™¨');\r\n            return;\r\n        }\r\n\r\n        // è·å–å½“å‰æ–‡ä»¶çš„æ‰©å±•åä½œä¸ºé»˜è®¤ç­›é€‰å™¨\r\n        const currentFileName = editor.document.fileName;\r\n        const fileExtension = path.extname(currentFileName);\r\n        const defaultFilter = fileExtension ? fileExtension.substring(1) : undefined; // ç§»é™¤ç‚¹å·\r\n\r\n        // é€‰æ‹©æ¨¡æ¿ç±»å‹æ–‡ä»¶å¤¹\r\n        const subDirs = FileSystemUtils.getSubDirectories(insertDir);\r\n        if (subDirs.length === 0) {\r\n            UIUtils.showError('insertç›®å½•ä¸‹æ²¡æœ‰æ¨¡æ¿æ–‡ä»¶å¤¹');\r\n            return;\r\n        }\r\n\r\n        const selectedDir = await UIUtils.showQuickPickWithFilter(\r\n            subDirs, \r\n            defaultFilter, \r\n            `é€‰æ‹©æ¨¡æ¿ç±»å‹${defaultFilter ? ` (å½“å‰æ–‡ä»¶: .${defaultFilter})` : ''}`\r\n        );\r\n        if (!selectedDir) {\r\n            return;\r\n        }\r\n\r\n        // é€‰æ‹©å…·ä½“æ¨¡æ¿æ–‡ä»¶\r\n        const templateDirPath = path.join(insertDir, selectedDir);\r\n        const templateFiles = FileSystemUtils.getFiles(templateDirPath);\r\n        if (templateFiles.length === 0) {\r\n            UIUtils.showError('æ‰€é€‰æ¨¡æ¿ç±»å‹ä¸‹æ²¡æœ‰æ¨¡æ¿æ–‡ä»¶');\r\n            return;\r\n        }\r\n\r\n        const selectedFile = await UIUtils.showQuickPick(templateFiles, 'é€‰æ‹©æ¨¡æ¿æ–‡ä»¶');\r\n        if (!selectedFile) {\r\n            return;\r\n        }\r\n\r\n        // è¯»å–æ¨¡æ¿å†…å®¹å¹¶æ’å…¥\r\n        const templateFilePath = path.join(templateDirPath, selectedFile);\r\n        const content = FileSystemUtils.readFileContent(templateFilePath);\r\n        if (content === null) {\r\n            UIUtils.showError('æ— æ³•è¯»å–æ¨¡æ¿æ–‡ä»¶å†…å®¹');\r\n            return;\r\n        }\r\n\r\n        // åœ¨å…‰æ ‡ä½ç½®æ’å…¥å†…å®¹ï¼Œæ”¯æŒå¤šè¡Œç¼©è¿›\r\n        await editor.edit(editBuilder => {\r\n            // è·å–å…‰æ ‡æ‰€åœ¨è¡Œçš„ç¼©è¿›\r\n            const currentLine = editor.document.lineAt(editor.selection.active.line);\r\n            const lineText = currentLine.text;\r\n            const cursorColumn = editor.selection.active.character;\r\n            \r\n            // è·å–å…‰æ ‡å‰çš„å†…å®¹ä½œä¸ºç¼©è¿›åŸºå‡†\r\n            const indentText = lineText.substring(0, cursorColumn);\r\n            \r\n            // å¦‚æœå†…å®¹åŒ…å«æ¢è¡Œç¬¦ï¼Œéœ€è¦ä¸ºé™¤ç¬¬ä¸€è¡Œå¤–çš„æ‰€æœ‰è¡Œæ·»åŠ ç¼©è¿›\r\n            let formattedContent = content;\r\n            if (content.includes('\\n')) {\r\n                const lines = content.split('\\n');\r\n                formattedContent = lines.map((line, index) => {\r\n                    // ç¬¬ä¸€è¡Œä¸éœ€è¦æ·»åŠ ç¼©è¿›ï¼Œå…¶ä»–è¡Œéƒ½è¦æ·»åŠ \r\n                    if (index === 0) {\r\n                        return line;\r\n                    } else {\r\n                        // ä¸ºéç¬¬ä¸€è¡Œæ·»åŠ ä¸å…‰æ ‡ä½ç½®ç›¸åŒçš„ç¼©è¿›\r\n                        return indentText + line;\r\n                    }\r\n                }).join('\\n');\r\n            }\r\n            \r\n            editBuilder.insert(editor.selection.active, formattedContent);\r\n        });\r\n\r\n        UIUtils.showInfo('æ¨¡æ¿å†…å®¹å·²æ’å…¥');\r\n    }\r\n\r\n    /**\r\n     * å¯¼å…¥æ¨¡æ¿ç›®å½•åˆ°ç›®æ ‡ä½ç½®\r\n     */\r\n    public static async importTemplate(targetUri?: vscode.Uri): Promise<void> {\r\n        const templateDirs = Configuration.getTemplateSubDirectories();\r\n        if (!templateDirs) {\r\n            UIUtils.showError('æœªé…ç½®æ¨¡æ¿è·¯å¾„æˆ–è·¯å¾„æ— æ•ˆ');\r\n            return;\r\n        }\r\n\r\n        const importDir = templateDirs.import;\r\n        if (!FileSystemUtils.directoryExists(importDir)) {\r\n            UIUtils.showError('importç›®å½•ä¸å­˜åœ¨');\r\n            return;\r\n        }\r\n\r\n        // ç¡®å®šç›®æ ‡ç›®å½•\r\n        let targetPath: string;\r\n        if (targetUri) {\r\n            const resourcePath = FileSystemUtils.getPathFromUri(targetUri);\r\n            if (FileSystemUtils.fileExists(resourcePath)) {\r\n                // å¦‚æœæ˜¯æ–‡ä»¶ï¼Œä½¿ç”¨å…¶çˆ¶ç›®å½•\r\n                targetPath = FileSystemUtils.getParentDirectory(resourcePath);\r\n            } else {\r\n                // å¦‚æœæ˜¯ç›®å½•ï¼Œç›´æ¥ä½¿ç”¨\r\n                targetPath = resourcePath;\r\n            }\r\n        } else {\r\n            UIUtils.showError('è¯·åœ¨èµ„æºç®¡ç†å™¨ä¸­é€‰æ‹©ç›®æ ‡ä½ç½®');\r\n            return;\r\n        }\r\n\r\n        // é€‰æ‹©è¦å¯¼å…¥çš„æ¨¡æ¿ç›®å½•\r\n        const subDirs = FileSystemUtils.getSubDirectories(importDir);\r\n        if (subDirs.length === 0) {\r\n            UIUtils.showError('importç›®å½•ä¸‹æ²¡æœ‰æ¨¡æ¿ç›®å½•');\r\n            return;\r\n        }\r\n\r\n        const selectedDir = await UIUtils.showQuickPick(subDirs, 'é€‰æ‹©è¦å¯¼å…¥çš„æ¨¡æ¿ç›®å½•');\r\n        if (!selectedDir) {\r\n            return;\r\n        }\r\n\r\n        // æ‰§è¡Œå¯¼å…¥æ“ä½œ - ä¿ç•™å†…éƒ¨ç›®å½•ç»“æ„\r\n        const sourceDir = path.join(importDir, selectedDir);\r\n        const success = FileSystemUtils.copyDirectoryWithStructure(sourceDir, targetPath);\r\n        \r\n        if (success) {\r\n            UIUtils.showInfo(`å·²æˆåŠŸå¯¼å…¥æ¨¡æ¿åˆ°: ${targetPath}ï¼ˆä¿ç•™ç›®å½•ç»“æ„ï¼‰`);\r\n        } else {\r\n            UIUtils.showError('å¯¼å…¥æ¨¡æ¿å¤±è´¥');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * åˆ›å»ºæ–°æ–‡ä»¶ä»æ¨¡æ¿\r\n     */\r\n    public static async createNewFile(targetUri?: vscode.Uri): Promise<void> {\r\n        const templateDirs = Configuration.getTemplateSubDirectories();\r\n        if (!templateDirs) {\r\n            UIUtils.showError('æœªé…ç½®æ¨¡æ¿è·¯å¾„æˆ–è·¯å¾„æ— æ•ˆ');\r\n            return;\r\n        }\r\n\r\n        const newDir = templateDirs.new;\r\n        if (!FileSystemUtils.directoryExists(newDir)) {\r\n            UIUtils.showError('newç›®å½•ä¸å­˜åœ¨');\r\n            return;\r\n        }\r\n\r\n        // ç¡®å®šç›®æ ‡ç›®å½•\r\n        let targetPath: string;\r\n        if (targetUri) {\r\n            const resourcePath = FileSystemUtils.getPathFromUri(targetUri);\r\n            if (FileSystemUtils.fileExists(resourcePath)) {\r\n                // å¦‚æœæ˜¯æ–‡ä»¶ï¼Œä½¿ç”¨å…¶çˆ¶ç›®å½•\r\n                targetPath = FileSystemUtils.getParentDirectory(resourcePath);\r\n            } else {\r\n                // å¦‚æœæ˜¯ç›®å½•ï¼Œç›´æ¥ä½¿ç”¨\r\n                targetPath = resourcePath;\r\n            }\r\n        } else {\r\n            UIUtils.showError('è¯·åœ¨èµ„æºç®¡ç†å™¨ä¸­é€‰æ‹©ç›®æ ‡ä½ç½®');\r\n            return;\r\n        }\r\n\r\n        // é€‰æ‹©æ¨¡æ¿æ–‡ä»¶\r\n        const templateFiles = FileSystemUtils.getFiles(newDir);\r\n        if (templateFiles.length === 0) {\r\n            UIUtils.showError('newç›®å½•ä¸‹æ²¡æœ‰æ¨¡æ¿æ–‡ä»¶');\r\n            return;\r\n        }\r\n\r\n        const selectedFile = await UIUtils.showQuickPick(templateFiles, 'é€‰æ‹©æ¨¡æ¿æ–‡ä»¶');\r\n        if (!selectedFile) {\r\n            return;\r\n        }\r\n\r\n        // è·å–æ–°æ–‡ä»¶å\r\n        const fileName = await UIUtils.showInputBox('è¾“å…¥æ–°æ–‡ä»¶å', 'è¯·è¾“å…¥æ–°æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰');\r\n        if (!fileName) {\r\n            return;\r\n        }\r\n\r\n        // ç¡®å®šæ–‡ä»¶æ‰©å±•å\r\n        const templateExt = path.extname(selectedFile);\r\n        const newFileName = fileName + templateExt;\r\n        const newFilePath = path.join(targetPath, newFileName);\r\n\r\n        // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨\r\n        if (FileSystemUtils.fileExists(newFilePath)) {\r\n            const overwrite = await UIUtils.showConfirmDialog(`æ–‡ä»¶ ${newFileName} å·²å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–ï¼Ÿ`);\r\n            if (!overwrite) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // å¤åˆ¶æ¨¡æ¿æ–‡ä»¶\r\n        const templateFilePath = path.join(newDir, selectedFile);\r\n        const success = FileSystemUtils.copyFile(templateFilePath, newFilePath);\r\n        \r\n        if (success) {\r\n            UIUtils.showInfo(`å·²åˆ›å»ºæ–°æ–‡ä»¶: ${newFileName}`);\r\n            // æ‰“å¼€æ–°åˆ›å»ºçš„æ–‡ä»¶\r\n            const document = await vscode.workspace.openTextDocument(newFilePath);\r\n            await vscode.window.showTextDocument(document);\r\n        } else {\r\n            UIUtils.showError('åˆ›å»ºæ–°æ–‡ä»¶å¤±è´¥');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ç®¡ç†æ¨¡æ¿ - åœ¨æ–°çª—å£ä¸­æ‰“å¼€æ¨¡æ¿ç›®å½•\r\n     */\r\n    public static async manageTemplates(): Promise<void> {\r\n        const templatePath = Configuration.getTemplatePath();\r\n        if (!templatePath) {\r\n            UIUtils.showError('æœªé…ç½®æ¨¡æ¿è·¯å¾„');\r\n            return;\r\n        }\r\n\r\n        if (!Configuration.validateTemplatePath(templatePath)) {\r\n            UIUtils.showError('æ¨¡æ¿è·¯å¾„æ— æ•ˆ');\r\n            return;\r\n        }\r\n\r\n        // åœ¨æ–°çª—å£ä¸­æ‰“å¼€æ¨¡æ¿ç›®å½•\r\n        const uri = vscode.Uri.file(templatePath);\r\n        await vscode.commands.executeCommand('vscode.openFolder', uri, { forceNewWindow: true });\r\n    }\r\n\r\n    /**\r\n     * å°†å½“å‰é€‰ä¸­çš„æ–‡æœ¬æ·»åŠ åˆ°insertæ¨¡æ¿ç›®å½•\r\n     */\r\n    public static async addToInsertDir(): Promise<void> {\r\n        const templateDirs = Configuration.getTemplateSubDirectories();\r\n        if (!templateDirs) {\r\n            UIUtils.showError('æœªé…ç½®æ¨¡æ¿è·¯å¾„æˆ–è·¯å¾„æ— æ•ˆ');\r\n            return;\r\n        }\r\n\r\n        const insertDir = templateDirs.insert;\r\n        if (!FileSystemUtils.directoryExists(insertDir)) {\r\n            UIUtils.showError('insertç›®å½•ä¸å­˜åœ¨');\r\n            return;\r\n        }\r\n\r\n        // è·å–å½“å‰æ´»åŠ¨ç¼–è¾‘å™¨\r\n        const editor = vscode.window.activeTextEditor;\r\n        if (!editor) {\r\n            UIUtils.showError('æ²¡æœ‰æ‰“å¼€çš„ç¼–è¾‘å™¨');\r\n            return;\r\n        }\r\n\r\n        // è·å–é€‰ä¸­çš„æ–‡æœ¬\r\n        const selection = editor.selection;\r\n        if (selection.isEmpty) {\r\n            UIUtils.showError('è¯·å…ˆé€‰ä¸­è¦ä¿å­˜ä¸ºæ¨¡æ¿çš„æ–‡æœ¬');\r\n            return;\r\n        }\r\n\r\n        const selectedText = editor.document.getText(selection);\r\n        if (!selectedText.trim()) {\r\n            UIUtils.showError('é€‰ä¸­çš„æ–‡æœ¬ä¸èƒ½ä¸ºç©º');\r\n            return;\r\n        }\r\n\r\n        // è·å–å½“å‰æ–‡ä»¶çš„æ‰©å±•åä½œä¸ºé»˜è®¤ç›®å½•\r\n        const currentFileName = editor.document.fileName;\r\n        const fileExtension = path.extname(currentFileName);\r\n        const defaultDir = fileExtension ? fileExtension.substring(1) : undefined; // ç§»é™¤ç‚¹å·\r\n\r\n        // è·å–insertç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•\r\n        const subDirs = FileSystemUtils.getSubDirectories(insertDir);\r\n        if (subDirs.length === 0) {\r\n            UIUtils.showError('insertç›®å½•ä¸‹æ²¡æœ‰å­ç›®å½•ï¼Œè¯·å…ˆåˆ›å»ºç›¸åº”çš„æ¨¡æ¿åˆ†ç±»ç›®å½•');\r\n            return;\r\n        }\r\n\r\n        // é€‰æ‹©ç›®æ ‡å­ç›®å½•\r\n        const selectedSubDir = await UIUtils.showQuickPickWithFilter(\r\n            subDirs,\r\n            defaultDir,\r\n            `é€‰æ‹©æ¨¡æ¿åˆ†ç±»ç›®å½•${defaultDir ? ` (å½“å‰æ–‡ä»¶: .${defaultDir})` : ''}`\r\n        );\r\n        if (!selectedSubDir) {\r\n            return;\r\n        }\r\n\r\n        // è¾“å…¥æ–‡ä»¶å\r\n        const fileName = await UIUtils.showInputBox(\r\n            'è¯·è¾“å…¥æ¨¡æ¿æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰',\r\n            'è¾“å…¥æ¨¡æ¿æ–‡ä»¶å'\r\n        );\r\n        if (!fileName) {\r\n            return;\r\n        }\r\n\r\n        // ç¡®å®šæ–‡ä»¶æ‰©å±•åï¼ˆä½¿ç”¨å½“å‰æ–‡ä»¶çš„æ‰©å±•åï¼‰\r\n        const templateFileName = fileName + (fileExtension || '.txt');\r\n        const templateFilePath = path.join(insertDir, selectedSubDir, templateFileName);\r\n\r\n        // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨\r\n        if (FileSystemUtils.fileExists(templateFilePath)) {\r\n            const overwrite = await UIUtils.showConfirmDialog(`æ¨¡æ¿æ–‡ä»¶ ${templateFileName} å·²å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–ï¼Ÿ`);\r\n            if (!overwrite) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // ä¿å­˜é€‰ä¸­çš„æ–‡æœ¬åˆ°æ¨¡æ¿æ–‡ä»¶\r\n        const success = FileSystemUtils.writeFileContent(templateFilePath, selectedText);\r\n        \r\n        if (success) {\r\n            UIUtils.showInfo(`å·²æˆåŠŸä¿å­˜æ¨¡æ¿: ${selectedSubDir}/${templateFileName}`);\r\n        } else {\r\n            UIUtils.showError('ä¿å­˜æ¨¡æ¿æ–‡ä»¶å¤±è´¥');\r\n        }\r\n    }\r\n}\r\n","import * as vscode from 'vscode';\r\nimport * as path from 'path';\r\nimport * as fs from 'fs';\r\nimport { FileSystemUtils } from '../utils/FileSystemUtils';\r\nimport { UIUtils } from '../utils/UIUtils';\r\n\r\n/**\r\n * é…ç½®ç®¡ç†ç±» - è´Ÿè´£ç®¡ç†æ’ä»¶çš„é…ç½®é¡¹\r\n */\r\nexport class Configuration {\r\n    private static readonly CONFIG_SECTION = 'vs-file-template';\r\n    private static readonly TEMPLATE_PATH_KEY = 'templatePath';\r\n    private static readonly ENABLE_CODELENS_KEY = 'enableCodeLens';\r\n\r\n    /**\r\n     * è·å–æ¨¡æ¿è·¯å¾„é…ç½®\r\n     */\r\n    public static getTemplatePath(): string | undefined {\r\n        const config = vscode.workspace.getConfiguration(this.CONFIG_SECTION);\r\n        return config.get<string>(this.TEMPLATE_PATH_KEY);\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®æ¨¡æ¿è·¯å¾„é…ç½®\r\n     */\r\n    public static async setTemplatePath(templatePath: string): Promise<void> {\r\n        const config = vscode.workspace.getConfiguration(this.CONFIG_SECTION);\r\n        await config.update(this.TEMPLATE_PATH_KEY, templatePath, vscode.ConfigurationTarget.Global);\r\n    }\r\n\r\n    /**\r\n     * éªŒè¯æ¨¡æ¿è·¯å¾„æ˜¯å¦æœ‰æ•ˆ\r\n     */\r\n    public static validateTemplatePath(templatePath: string): boolean {\r\n        if (!templatePath) {\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            const stat = fs.statSync(templatePath);\r\n            return stat.isDirectory();\r\n        } catch {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * è·å–æ¨¡æ¿å­ç›®å½•è·¯å¾„\r\n     */\r\n    public static getTemplateSubDirectories(): { import: string; insert: string; new: string } | null {\r\n        const templatePath = this.getTemplatePath();\r\n        if (!templatePath || !this.validateTemplatePath(templatePath)) {\r\n            return null;\r\n        }\r\n\r\n        return {\r\n            import: path.join(templatePath, 'import'),\r\n            insert: path.join(templatePath, 'insert'),\r\n            new: path.join(templatePath, 'new')\r\n        };\r\n    }\r\n\r\n    /**\r\n     * æ£€æŸ¥å¹¶åˆ›å»ºå¿…éœ€çš„æ¨¡æ¿å­ç›®å½•\r\n     */\r\n    public static ensureTemplateSubDirectories(): boolean {\r\n        const templatePath = this.getTemplatePath();\r\n        if (!templatePath) {\r\n            return false;\r\n        }\r\n\r\n        // å¦‚æœæ¨¡æ¿æ ¹ç›®å½•ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»ºå®ƒ\r\n        if (!this.validateTemplatePath(templatePath)) {\r\n            if (!FileSystemUtils.createDirectory(templatePath)) {\r\n                UIUtils.showError(`æ— æ³•åˆ›å»ºæ¨¡æ¿æ ¹ç›®å½•: ${templatePath}`);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // åˆ›å»ºå¿…éœ€çš„å­ç›®å½•\r\n        const requiredDirs = ['import', 'insert', 'new'];\r\n        const createdDirs: string[] = [];\r\n        let allSuccess = true;\r\n\r\n        for (const dirName of requiredDirs) {\r\n            const dirPath = path.join(templatePath, dirName);\r\n            if (!FileSystemUtils.directoryExists(dirPath)) {\r\n                if (FileSystemUtils.createDirectory(dirPath)) {\r\n                    createdDirs.push(dirName);\r\n                } else {\r\n                    UIUtils.showError(`æ— æ³•åˆ›å»ºç›®å½•: ${dirPath}`);\r\n                    allSuccess = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        // æ˜¾ç¤ºåˆ›å»ºç»“æœ\r\n        if (createdDirs.length > 0) {\r\n            UIUtils.showInfo(`å·²è‡ªåŠ¨åˆ›å»ºæ¨¡æ¿ç›®å½•: ${createdDirs.join(', ')}`);\r\n        }\r\n\r\n        return allSuccess;\r\n    }\r\n\r\n    /**\r\n     * æ‰“å¼€è®¾ç½®é¡µé¢\r\n     */\r\n    public static async openSettings(): Promise<void> {\r\n        await vscode.commands.executeCommand('workbench.action.openSettings', this.CONFIG_SECTION);\r\n    }\r\n\r\n    /**\r\n     * è·å–CodeLenså¯ç”¨çŠ¶æ€\r\n     */\r\n    public static getCodeLensEnabled(): boolean {\r\n        const config = vscode.workspace.getConfiguration(this.CONFIG_SECTION);\r\n        return config.get<boolean>(this.ENABLE_CODELENS_KEY, true);\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®CodeLenså¯ç”¨çŠ¶æ€\r\n     */\r\n    public static async setCodeLensEnabled(enabled: boolean): Promise<void> {\r\n        const config = vscode.workspace.getConfiguration(this.CONFIG_SECTION);\r\n        await config.update(this.ENABLE_CODELENS_KEY, enabled, vscode.ConfigurationTarget.Global);\r\n    }\r\n\r\n    /**\r\n     * åˆ‡æ¢CodeLenså¯ç”¨çŠ¶æ€\r\n     */\r\n    public static async toggleCodeLens(): Promise<boolean> {\r\n        const currentState = this.getCodeLensEnabled();\r\n        const newState = !currentState;\r\n        await this.setCodeLensEnabled(newState);\r\n        return newState;\r\n    }\r\n}\r\n","module.exports = require(\"fs\");","module.exports = require(\"path\");","import * as vscode from 'vscode';\r\n\r\n/**\r\n * çŠ¶æ€æ ç®¡ç†å™¨ - ç®¡ç†çŠ¶æ€æ æŒ‰é’®\r\n */\r\nexport class StatusBarManager {\r\n    private statusBarItem: vscode.StatusBarItem;\r\n\r\n    constructor() {\r\n        this.statusBarItem = vscode.window.createStatusBarItem(\r\n            vscode.StatusBarAlignment.Right,\r\n            100\r\n        );\r\n        this.setupStatusBarItem();\r\n    }\r\n\r\n    /**\r\n     * è®¾ç½®çŠ¶æ€æ æŒ‰é’®\r\n     */\r\n    private setupStatusBarItem(): void {\r\n        this.statusBarItem.text = '$(file-code) æ¨¡æ¿';\r\n        this.statusBarItem.tooltip = 'æ–‡ä»¶æ¨¡æ¿ç®¡ç†';\r\n        this.statusBarItem.command = 'vs-file-template.btn';\r\n        this.statusBarItem.show();\r\n    }\r\n\r\n    /**\r\n     * æ˜¾ç¤ºçŠ¶æ€æ æŒ‰é’®\r\n     */\r\n    public show(): void {\r\n        this.statusBarItem.show();\r\n    }\r\n\r\n    /**\r\n     * éšè—çŠ¶æ€æ æŒ‰é’®\r\n     */\r\n    public hide(): void {\r\n        this.statusBarItem.hide();\r\n    }\r\n\r\n    /**\r\n     * é”€æ¯çŠ¶æ€æ æŒ‰é’®\r\n     */\r\n    public dispose(): void {\r\n        this.statusBarItem.dispose();\r\n    }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(265);\n"],"names":["showError","message","vscode","window","showErrorMessage","showInfo","showInformationMessage","showWarning","showWarningMessage","showQuickPick","items","placeholder","length","placeHolder","this","showQuickPickWithFilter","defaultFilter","Promise","resolve","quickPick","createQuickPick","quickPickItems","map","item","label","description","value","onDidChangeSelection","selection","hide","onDidHide","undefined","dispose","show","showInputBox","prompt","showOpenDialog","title","result","canSelectFiles","canSelectFolders","canSelectMany","showConfirmDialog","modal","showActionMenu","actions","Configuration","getCodeLensEnabled","context","console","log","CommandHandler","registerCommands","codeLensProvider","TemplateCodeLensProvider","codeLensDisposable","languages","registerCodeLensProvider","scheme","subscriptions","push","selectionChangeListener","onDidChangeTextEditorSelection","refresh","activeEditorChangeListener","onDidChangeActiveTextEditor","cursorChangeListener","statusBarManager","StatusBarManager","configChangeListener","workspace","onDidChangeConfiguration","event","affectsConfiguration","templatePath","getTemplatePath","validateTemplatePath","ensureTemplateSubDirectories","UIUtils","handleTemplatePathChanged","checkTemplateConfiguration","_onDidChangeCodeLenses","EventEmitter","onDidChangeCodeLenses","constructor","provideCodeLenses","document","token","codeLenses","uri","editor","activeTextEditor","cursorLine","active","line","cursorPosition","Range","insertCodeLens","CodeLens","command","tooltip","isEmpty","addToTemplateCodeLens","resolveCodeLens","codeLens","fire","module","exports","require","insertCommand","commands","registerCommand","handleInsertCommand","importCommand","handleImportCommand","newCommand","handleNewCommand","btnCommand","handleBtnCommand","addToInsertCommand","handleAddToInsertDirCommand","toggleCodeLensCommand","handleToggleCodeLensCommand","TemplateService","insertTemplate","error","importTemplate","createNewFile","action","openSettings","manageTemplates","addToInsertDir","newState","toggleCodeLens","executeCommand","directoryExists","dirPath","fs","statSync","isDirectory","fileExists","filePath","isFile","createDirectory","mkdirSync","recursive","getSubDirectories","readdirSync","filter","fullPath","path","join","getFiles","getFilesRecursively","files","stat","readFileContent","readFileSync","writeFileContent","content","dir","dirname","writeFileSync","copyFile","sourcePath","targetPath","targetDir","copyFileSync","copyFilesRecursively","sourceDir","file","fileName","basename","copyDirectoryWithStructure","getParentDirectory","getPathFromUri","fsPath","templateDirs","getTemplateSubDirectories","insertDir","insert","FileSystemUtils","currentFileName","fileExtension","extname","substring","subDirs","selectedDir","templateDirPath","templateFiles","selectedFile","templateFilePath","edit","editBuilder","lineText","lineAt","text","cursorColumn","character","indentText","formattedContent","includes","split","index","targetUri","importDir","import","resourcePath","newDir","new","newFileName","newFilePath","openTextDocument","showTextDocument","Uri","forceNewWindow","selectedText","getText","trim","defaultDir","selectedSubDir","templateFileName","static","getConfiguration","CONFIG_SECTION","get","TEMPLATE_PATH_KEY","setTemplatePath","config","update","ConfigurationTarget","Global","requiredDirs","createdDirs","allSuccess","dirName","ENABLE_CODELENS_KEY","setCodeLensEnabled","enabled","statusBarItem","createStatusBarItem","StatusBarAlignment","Right","setupStatusBarItem","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call"],"sourceRoot":""}