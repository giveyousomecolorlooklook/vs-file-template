(()=>{"use strict";var t={229:function(t,e,r){var i,n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(i=function(t){return i=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},i(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=i(t),s=0;s<r.length;s++)"default"!==r[s]&&n(e,t,r[s]);return o(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.UIUtils=void 0;const a=s(r(398));e.UIUtils=class{static showError(t){a.window.showErrorMessage(`文件模板: ${t}`)}static showInfo(t){a.window.showInformationMessage(`文件模板: ${t}`)}static showWarning(t){a.window.showWarningMessage(`文件模板: ${t}`)}static async showQuickPick(t,e){if(0!==t.length)return await a.window.showQuickPick(t,{placeHolder:e||"请选择一个选项"});this.showWarning("没有可选项")}static async showQuickPickWithFilter(t,e,r){if(0!==t.length)return new Promise(i=>{const n=a.window.createQuickPick(),o=t.map(t=>({label:t,description:""}));n.items=o,n.placeholder=r||"请选择一个选项",e&&(n.value=e),n.onDidChangeSelection(t=>{t[0]&&(i(t[0].label),n.hide())}),n.onDidHide(()=>{i(void 0),n.dispose()}),n.show()});this.showWarning("没有可选项")}static async showInputBox(t,e){return await a.window.showInputBox({placeHolder:t,prompt:e})}static async showOpenDialog(t){const e=await a.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,title:t||"选择文件夹"});return e?.[0]}static async showConfirmDialog(t){return"确定"===await a.window.showInformationMessage(t,{modal:!0},"确定","取消")}static async showActionMenu(){return await this.showQuickPick(["配置模板路径","管理模板"],"选择操作")}}},265:function(t,e,r){var i,n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(i=function(t){return i=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},i(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=i(t),s=0;s<r.length;s++)"default"!==r[s]&&n(e,t,r[s]);return o(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.activate=function(t){console.log("文件模板插件已激活"),c.CommandHandler.registerCommands(t),d=new l.StatusBarManager,t.subscriptions.push({dispose:()=>d.dispose()});const e=a.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration("vs-file-template.templatePath")&&function(){console.log("模板路径配置已变化，检查目录结构...");const t=u.Configuration.getTemplatePath();t?u.Configuration.validateTemplatePath(t)?u.Configuration.ensureTemplateSubDirectories()&&console.log(`模板路径已更新: ${t}`):f.UIUtils.showWarning("新配置的模板路径无效，请检查路径是否存在"):f.UIUtils.showWarning("模板路径已清空")}()});t.subscriptions.push(e),function(){const t=u.Configuration.getTemplatePath();t?u.Configuration.validateTemplatePath(t)?(u.Configuration.ensureTemplateSubDirectories(),console.log(`模板路径已配置: ${t}`)):f.UIUtils.showWarning("配置的模板路径无效，请检查路径是否存在"):f.UIUtils.showWarning("尚未配置模板路径，请先配置模板路径")}(),f.UIUtils.showInfo("文件模板插件已启动")},e.deactivate=function(){d&&d.dispose(),console.log("文件模板插件已停用")};const a=s(r(398)),c=r(448),l=r(941),u=r(765),f=r(229);let d},398:t=>{t.exports=require("vscode")},448:function(t,e,r){var i,n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(i=function(t){return i=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},i(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=i(t),s=0;s<r.length;s++)"default"!==r[s]&&n(e,t,r[s]);return o(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.CommandHandler=void 0;const a=s(r(398)),c=r(716),l=r(765),u=r(229);e.CommandHandler=class{static registerCommands(t){const e=a.commands.registerCommand("vs-file-template.insert",()=>this.handleInsertCommand()),r=a.commands.registerCommand("vs-file-template.import",t=>this.handleImportCommand(t)),i=a.commands.registerCommand("vs-file-template.new",t=>this.handleNewCommand(t)),n=a.commands.registerCommand("vs-file-template.btn",()=>this.handleBtnCommand()),o=a.commands.registerCommand("vs-file-template.addToInsertDir",()=>this.handleAddToInsertDirCommand());t.subscriptions.push(e,r,i,n,o)}static async handleInsertCommand(){try{await c.TemplateService.insertTemplate()}catch(t){u.UIUtils.showError(`插入模板失败: ${t}`)}}static async handleImportCommand(t){try{await c.TemplateService.importTemplate(t)}catch(t){u.UIUtils.showError(`导入模板失败: ${t}`)}}static async handleNewCommand(t){try{await c.TemplateService.createNewFile(t)}catch(t){u.UIUtils.showError(`创建新文件失败: ${t}`)}}static async handleBtnCommand(){try{const t=await u.UIUtils.showActionMenu();if(!t)return;switch(t){case"配置模板路径":await l.Configuration.openSettings();break;case"管理模板":await c.TemplateService.manageTemplates()}}catch(t){u.UIUtils.showError(`执行操作失败: ${t}`)}}static async handleAddToInsertDirCommand(){try{await c.TemplateService.addToInsertDir()}catch(t){u.UIUtils.showError(`添加模板失败: ${t}`)}}}},534:function(t,e,r){var i,n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(i=function(t){return i=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},i(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=i(t),s=0;s<r.length;s++)"default"!==r[s]&&n(e,t,r[s]);return o(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.FileSystemUtils=void 0;const a=s(r(896)),c=s(r(928));e.FileSystemUtils=class{static directoryExists(t){try{return a.statSync(t).isDirectory()}catch{return!1}}static fileExists(t){try{return a.statSync(t).isFile()}catch{return!1}}static createDirectory(t){try{return this.directoryExists(t)||a.mkdirSync(t,{recursive:!0}),!0}catch(e){return console.error(`创建目录失败: ${t}`,e),!1}}static getSubDirectories(t){if(!this.directoryExists(t))return[];try{return a.readdirSync(t).filter(e=>{const r=c.join(t,e);return this.directoryExists(r)})}catch{return[]}}static getFiles(t){if(!this.directoryExists(t))return[];try{return a.readdirSync(t).filter(e=>{const r=c.join(t,e);return this.fileExists(r)})}catch{return[]}}static getFilesRecursively(t){if(!this.directoryExists(t))return[];const e=[];try{const r=a.readdirSync(t);for(const i of r){const r=c.join(t,i),n=a.statSync(r);n.isFile()?e.push(r):n.isDirectory()&&e.push(...this.getFilesRecursively(r))}}catch{}return e}static readFileContent(t){try{return a.readFileSync(t,"utf8")}catch{return null}}static writeFileContent(t,e){try{const r=c.dirname(t);return this.directoryExists(r)||a.mkdirSync(r,{recursive:!0}),a.writeFileSync(t,e,"utf8"),!0}catch{return!1}}static copyFile(t,e){try{const r=c.dirname(e);return this.directoryExists(r)||a.mkdirSync(r,{recursive:!0}),a.copyFileSync(t,e),!0}catch{return!1}}static copyFilesRecursively(t,e){try{const r=this.getFilesRecursively(t);for(const t of r){const r=c.basename(t),i=c.join(e,r);if(!this.copyFile(t,i))return!1}return!0}catch{return!1}}static copyDirectoryWithStructure(t,e){try{if(!this.directoryExists(t))return!1;const r=a.readdirSync(t);for(const i of r){const r=c.join(t,i),n=c.join(e,i),o=a.statSync(r);if(o.isFile()){if(!this.copyFile(r,n))return!1}else if(o.isDirectory()&&(this.directoryExists(n)||a.mkdirSync(n,{recursive:!0}),!this.copyDirectoryWithStructure(r,n)))return!1}return!0}catch(t){return console.error("复制目录失败:",t),!1}}static getParentDirectory(t){return c.dirname(t)}static getPathFromUri(t){return t.fsPath}}},716:function(t,e,r){var i,n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(i=function(t){return i=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},i(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=i(t),s=0;s<r.length;s++)"default"!==r[s]&&n(e,t,r[s]);return o(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.TemplateService=void 0;const a=s(r(398)),c=s(r(928)),l=r(765),u=r(534),f=r(229);e.TemplateService=class{static async insertTemplate(){const t=l.Configuration.getTemplateSubDirectories();if(!t)return void f.UIUtils.showError("未配置模板路径或路径无效");const e=t.insert;if(!u.FileSystemUtils.directoryExists(e))return void f.UIUtils.showError("insert目录不存在");const r=a.window.activeTextEditor;if(!r)return void f.UIUtils.showError("没有打开的编辑器");const i=r.document.fileName,n=c.extname(i),o=n?n.substring(1):void 0,s=u.FileSystemUtils.getSubDirectories(e);if(0===s.length)return void f.UIUtils.showError("insert目录下没有模板文件夹");const d=await f.UIUtils.showQuickPickWithFilter(s,o,"选择模板类型"+(o?` (当前文件: .${o})`:""));if(!d)return;const h=c.join(e,d),m=u.FileSystemUtils.getFiles(h);if(0===m.length)return void f.UIUtils.showError("所选模板类型下没有模板文件");const p=await f.UIUtils.showQuickPick(m,"选择模板文件");if(!p)return;const w=c.join(h,p),y=u.FileSystemUtils.readFileContent(w);null!==y?(await r.edit(t=>{t.insert(r.selection.active,y)}),f.UIUtils.showInfo("模板内容已插入")):f.UIUtils.showError("无法读取模板文件内容")}static async importTemplate(t){const e=l.Configuration.getTemplateSubDirectories();if(!e)return void f.UIUtils.showError("未配置模板路径或路径无效");const r=e.import;if(!u.FileSystemUtils.directoryExists(r))return void f.UIUtils.showError("import目录不存在");let i;if(!t)return void f.UIUtils.showError("请在资源管理器中选择目标位置");{const e=u.FileSystemUtils.getPathFromUri(t);i=u.FileSystemUtils.fileExists(e)?u.FileSystemUtils.getParentDirectory(e):e}const n=u.FileSystemUtils.getSubDirectories(r);if(0===n.length)return void f.UIUtils.showError("import目录下没有模板目录");const o=await f.UIUtils.showQuickPick(n,"选择要导入的模板目录");if(!o)return;const s=c.join(r,o);u.FileSystemUtils.copyDirectoryWithStructure(s,i)?f.UIUtils.showInfo(`已成功导入模板到: ${i}（保留目录结构）`):f.UIUtils.showError("导入模板失败")}static async createNewFile(t){const e=l.Configuration.getTemplateSubDirectories();if(!e)return void f.UIUtils.showError("未配置模板路径或路径无效");const r=e.new;if(!u.FileSystemUtils.directoryExists(r))return void f.UIUtils.showError("new目录不存在");let i;if(!t)return void f.UIUtils.showError("请在资源管理器中选择目标位置");{const e=u.FileSystemUtils.getPathFromUri(t);i=u.FileSystemUtils.fileExists(e)?u.FileSystemUtils.getParentDirectory(e):e}const n=u.FileSystemUtils.getFiles(r);if(0===n.length)return void f.UIUtils.showError("new目录下没有模板文件");const o=await f.UIUtils.showQuickPick(n,"选择模板文件");if(!o)return;const s=await f.UIUtils.showInputBox("输入新文件名","请输入新文件名（不含扩展名）");if(!s)return;const d=s+c.extname(o),h=c.join(i,d);if(u.FileSystemUtils.fileExists(h)&&!await f.UIUtils.showConfirmDialog(`文件 ${d} 已存在，是否覆盖？`))return;const m=c.join(r,o);if(u.FileSystemUtils.copyFile(m,h)){f.UIUtils.showInfo(`已创建新文件: ${d}`);const t=await a.workspace.openTextDocument(h);await a.window.showTextDocument(t)}else f.UIUtils.showError("创建新文件失败")}static async manageTemplates(){const t=l.Configuration.getTemplatePath();if(!t)return void f.UIUtils.showError("未配置模板路径");if(!l.Configuration.validateTemplatePath(t))return void f.UIUtils.showError("模板路径无效");const e=a.Uri.file(t);await a.commands.executeCommand("vscode.openFolder",e,{forceNewWindow:!0})}static async addToInsertDir(){const t=l.Configuration.getTemplateSubDirectories();if(!t)return void f.UIUtils.showError("未配置模板路径或路径无效");const e=t.insert;if(!u.FileSystemUtils.directoryExists(e))return void f.UIUtils.showError("insert目录不存在");const r=a.window.activeTextEditor;if(!r)return void f.UIUtils.showError("没有打开的编辑器");const i=r.selection;if(i.isEmpty)return void f.UIUtils.showError("请先选中要保存为模板的文本");const n=r.document.getText(i);if(!n.trim())return void f.UIUtils.showError("选中的文本不能为空");const o=r.document.fileName,s=c.extname(o),d=s?s.substring(1):void 0,h=u.FileSystemUtils.getSubDirectories(e);if(0===h.length)return void f.UIUtils.showError("insert目录下没有子目录，请先创建相应的模板分类目录");const m=await f.UIUtils.showQuickPickWithFilter(h,d,"选择模板分类目录"+(d?` (当前文件: .${d})`:""));if(!m)return;const p=await f.UIUtils.showInputBox("请输入模板文件名（不含扩展名）","输入模板文件名");if(!p)return;const w=p+(s||".txt"),y=c.join(e,m,w);u.FileSystemUtils.fileExists(y)&&!await f.UIUtils.showConfirmDialog(`模板文件 ${w} 已存在，是否覆盖？`)||(u.FileSystemUtils.writeFileContent(y,n)?f.UIUtils.showInfo(`已成功保存模板: ${m}/${w}`):f.UIUtils.showError("保存模板文件失败"))}}},765:function(t,e,r){var i,n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(i=function(t){return i=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},i(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=i(t),s=0;s<r.length;s++)"default"!==r[s]&&n(e,t,r[s]);return o(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.Configuration=void 0;const a=s(r(398)),c=s(r(928)),l=s(r(896)),u=r(534),f=r(229);e.Configuration=class{static CONFIG_SECTION="vs-file-template";static TEMPLATE_PATH_KEY="templatePath";static getTemplatePath(){return a.workspace.getConfiguration(this.CONFIG_SECTION).get(this.TEMPLATE_PATH_KEY)}static async setTemplatePath(t){const e=a.workspace.getConfiguration(this.CONFIG_SECTION);await e.update(this.TEMPLATE_PATH_KEY,t,a.ConfigurationTarget.Global)}static validateTemplatePath(t){if(!t)return!1;try{return l.statSync(t).isDirectory()}catch{return!1}}static getTemplateSubDirectories(){const t=this.getTemplatePath();return t&&this.validateTemplatePath(t)?{import:c.join(t,"import"),insert:c.join(t,"insert"),new:c.join(t,"new")}:null}static ensureTemplateSubDirectories(){const t=this.getTemplatePath();if(!t)return!1;if(!this.validateTemplatePath(t)&&!u.FileSystemUtils.createDirectory(t))return f.UIUtils.showError(`无法创建模板根目录: ${t}`),!1;const e=["import","insert","new"],r=[];let i=!0;for(const n of e){const e=c.join(t,n);u.FileSystemUtils.directoryExists(e)||(u.FileSystemUtils.createDirectory(e)?r.push(n):(f.UIUtils.showError(`无法创建目录: ${e}`),i=!1))}return r.length>0&&f.UIUtils.showInfo(`已自动创建模板目录: ${r.join(", ")}`),i}static async openSettings(){await a.commands.executeCommand("workbench.action.openSettings",this.CONFIG_SECTION)}}},896:t=>{t.exports=require("fs")},928:t=>{t.exports=require("path")},941:function(t,e,r){var i,n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(i=function(t){return i=Object.getOwnPropertyNames||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[e.length]=r);return e},i(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r=i(t),s=0;s<r.length;s++)"default"!==r[s]&&n(e,t,r[s]);return o(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.StatusBarManager=void 0;const a=s(r(398));e.StatusBarManager=class{statusBarItem;constructor(){this.statusBarItem=a.window.createStatusBarItem(a.StatusBarAlignment.Right,100),this.setupStatusBarItem()}setupStatusBarItem(){this.statusBarItem.text="$(file-code) 模板",this.statusBarItem.tooltip="文件模板管理",this.statusBarItem.command="vs-file-template.btn",this.statusBarItem.show()}show(){this.statusBarItem.show()}hide(){this.statusBarItem.hide()}dispose(){this.statusBarItem.dispose()}}}},e={},r=function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,r),o.exports}(265);module.exports=r})();