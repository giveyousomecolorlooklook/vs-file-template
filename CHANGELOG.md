# 变更日志

所有对此项目的重要更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/spec/v2.0.0.html)。

## [0.1.0] - 2025-08-23

### 新增
- **CodeLens功能**: 在编辑器中显示模板操作的代码镜头
  - 🔧 从模板插入 - 在光标所在行始终显示
  - 💾 保存选中内容为模板 - 仅在有文本选中时显示
- **CodeLens配置管理**:
  - 新增 `vs-file-template.enableCodeLens` 配置项控制CodeLens显示
  - 新增 `vs-file-template.toggleCodeLens` 命令用于切换CodeLens状态
  - 在状态栏按钮菜单中添加启用/禁用CodeLens选项
- **智能缩进功能**: 插入多行模板时自动应用与光标位置相同的缩进
  - 第一行保持原样，其他行自动添加与光标位置相同的缩进
  - 支持任意缩进格式（空格、制表符等）

### 改进
- 优化了CodeLens的实时刷新机制
- 改进了配置变化的监听和响应
- 增强了用户交互体验

### 技术特性
- 实现了 `TemplateCodeLensProvider` 类提供CodeLens功能
- 添加了配置变化监听器自动刷新CodeLens
- 扩展了 `Configuration` 类支持CodeLens相关配置
- 完善了命令处理系统

## [0.0.1] - 2025-08-20

### 新增
- 实现了文件模板管理系统的核心功能
- 添加了五个主要命令：
  - `vs-file-template.insert`: 插入模板到当前编辑器（支持智能筛选）
  - `vs-file-template.import`: 批量导入模板到指定目录（保留目录结构）
  - `vs-file-template.new`: 基于模板创建新文件
  - `vs-file-template.addToInsertDir`: 保存选中文本为模板（智能分类）
  - `vs-file-template.btn`: 状态栏按钮管理入口
- 实现了智能模板筛选功能：
  - 插入模板时自动根据当前文件扩展名填充筛选器
  - 保存模板时自动匹配当前文件类型对应的目录
  - 使用自定义QuickPick实现默认输入值功能
- 实现了模板创建功能：
  - 支持将选中文本直接保存为新模板
  - 智能推荐目标目录和文件扩展名
  - 提供覆盖确认功能
- 实现了递归导入并保留目录结构：
  - 导入模板时完整保留选中目录内部的文件夹结构
  - 支持复杂的模板项目结构
- 实现了高内聚低耦合的代码架构：
  - **配置层**: `Configuration` 类管理插件配置
  - **工具层**: `FileSystemUtils` 和 `UIUtils` 提供通用工具
  - **服务层**: `TemplateService` 实现核心业务逻辑
  - **命令层**: `CommandHandler` 处理命令注册和执行
  - **UI层**: `StatusBarManager` 管理状态栏组件
- 添加了右键菜单集成：
  - 编辑器右键菜单：插入模板
  - 资源管理器右键菜单：导入模板、新建文件
- 实现了状态栏按钮，提供快捷访问模板管理功能
- 添加了完整的错误处理和用户提示
- 支持模板路径配置和验证
- 创建了详细的文档和使用说明

### 技术特性
- 使用 TypeScript 开发，提供类型安全
- 模块化设计，易于维护和扩展
- 异步操作支持，不阻塞 VS Code 界面
- 完整的文件系统操作封装
- 用户友好的交互界面

### 文档
- 添加了详细的 README.md 说明文档
- 创建了模板目录结构示例
- 提供了使用指南和配置说明
- 包含了开发和部署信息

### 测试
- 添加了基础单元测试框架
- 实现了配置、文件系统工具和命令注册的测试用例